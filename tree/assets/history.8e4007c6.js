import{_ as un}from"./ItemDetailed.8000222f.js";import{E as an,G as L,H as G,I as q,J as sn,K as ln,L as cn,b as Z,u as b,p as z,M as fn,c as B,o as mn,N as hn,O as pn,P as dn,w as gn,k as $,e as E,j as R,z as vn,y as O,v as x,Q as nn,m as Mn,R as wn,F as T,x as V,g as H}from"./index.e7ebed76.js";import"./GearedNumber.05ad4a58.js";function _n(n,e){e||(e=[]);var o=n?Math.min(e.length,n.length):0,t=e.slice(),r;return function(u){for(r=0;r<o;++r)t[r]=n[r]*(1-u)+e[r]*u;return t}}function yn(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function kn(n,e){var o=e?e.length:0,t=n?Math.min(o,n.length):0,r=new Array(t),u=new Array(o),a;for(a=0;a<t;++a)r[a]=F(n[a],e[a]);for(;a<o;++a)u[a]=e[a];return function(i){for(a=0;a<t;++a)u[a]=r[a](i);return u}}function Nn(n,e){var o=new Date;return n=+n,e=+e,function(t){return o.setTime(n*(1-t)+e*t),o}}function $n(n,e){var o={},t={},r;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in n?o[r]=F(n[r],e[r]):t[r]=e[r];return function(u){for(r in o)t[r]=o[r](u);return t}}function F(n,e){var o=typeof e,t;return e==null||o==="boolean"?an(e):(o==="number"?L:o==="string"?(t=G(e))?(e=t,q):sn:e instanceof G?q:e instanceof Date?Nn:yn(e)?_n:Array.isArray(e)?kn:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?$n:L)(n,e)}function xn(n,e){return n=+n,e=+e,function(o){return Math.round(n*(1-o)+e*o)}}function C(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function An(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function en(n){let e,o,t;n.length!==2?(e=C,o=(i,s)=>C(n(i),s),t=(i,s)=>n(i)-s):(e=n===C||n===An?n:Bn,o=n,t=n);function r(i,s,c=0,m=i.length){if(c<m){if(e(s,s)!==0)return m;do{const f=c+m>>>1;o(i[f],s)<0?c=f+1:m=f}while(c<m)}return c}function u(i,s,c=0,m=i.length){if(c<m){if(e(s,s)!==0)return m;do{const f=c+m>>>1;o(i[f],s)<=0?c=f+1:m=f}while(c<m)}return c}function a(i,s,c=0,m=i.length){const f=r(i,s,c,m-1);return f>c&&t(i[f-1],s)>-t(i[f],s)?f-1:f}return{left:r,center:a,right:u}}function Bn(){return 0}function Rn(n){return n===null?NaN:+n}const Sn=en(C),En=Sn.right;en(Rn).center;const Cn=En;var P=Math.sqrt(50),U=Math.sqrt(10),X=Math.sqrt(2);function J(n,e,o){var t,r=-1,u,a,i;if(e=+e,n=+n,o=+o,n===e&&o>0)return[n];if((t=e<n)&&(u=n,n=e,e=u),(i=In(n,e,o))===0||!isFinite(i))return[];if(i>0){let s=Math.round(n/i),c=Math.round(e/i);for(s*i<n&&++s,c*i>e&&--c,a=new Array(u=c-s+1);++r<u;)a[r]=(s+r)*i}else{i=-i;let s=Math.round(n*i),c=Math.round(e*i);for(s/i<n&&++s,c/i>e&&--c,a=new Array(u=c-s+1);++r<u;)a[r]=(s+r)/i}return t&&a.reverse(),a}function In(n,e,o){var t=(e-n)/Math.max(0,o),r=Math.floor(Math.log(t)/Math.LN10),u=t/Math.pow(10,r);return r>=0?(u>=P?10:u>=U?5:u>=X?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(u>=P?10:u>=U?5:u>=X?2:1)}function Ln(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function zn(n){return function(){return n}}function jn(n){return+n}var K=[0,1];function S(n){return n}function j(n,e){return(e-=n=+n)?function(o){return(o-n)/e}:zn(isNaN(e)?NaN:.5)}function Fn(n,e){var o;return n>e&&(o=n,n=e,e=o),function(t){return Math.max(n,Math.min(e,t))}}function Dn(n,e,o){var t=n[0],r=n[1],u=e[0],a=e[1];return r<t?(t=j(r,t),u=o(a,u)):(t=j(t,r),u=o(u,a)),function(i){return u(t(i))}}function Gn(n,e,o){var t=Math.min(n.length,e.length)-1,r=new Array(t),u=new Array(t),a=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<t;)r[a]=j(n[a],n[a+1]),u[a]=o(e[a],e[a+1]);return function(i){var s=Cn(n,i,1,t)-1;return u[s](r[s](i))}}function qn(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function On(){var n=K,e=K,o=F,t,r,u,a=S,i,s,c;function m(){var l=Math.min(n.length,e.length);return a!==S&&(a=Fn(n[0],n[l-1])),i=l>2?Gn:Dn,s=c=null,f}function f(l){return l==null||isNaN(l=+l)?u:(s||(s=i(n.map(t),e,o)))(t(a(l)))}return f.invert=function(l){return a(r((c||(c=i(e,n.map(t),L)))(l)))},f.domain=function(l){return arguments.length?(n=Array.from(l,jn),m()):n.slice()},f.range=function(l){return arguments.length?(e=Array.from(l),m()):e.slice()},f.rangeRound=function(l){return e=Array.from(l),o=xn,m()},f.clamp=function(l){return arguments.length?(a=l?!0:S,m()):a!==S},f.interpolate=function(l){return arguments.length?(o=l,m()):o},f.unknown=function(l){return arguments.length?(u=l,f):u},function(l,v){return t=l,r=v,m()}}function Tn(n,e){n=n.slice();var o=0,t=n.length-1,r=n[o],u=n[t],a;return u<r&&(a=o,o=t,t=a,a=r,r=u,u=a),n[o]=e.floor(r),n[t]=e.ceil(u),n}function Q(n){return Math.log(n)}function W(n){return Math.exp(n)}function Vn(n){return-Math.log(-n)}function Hn(n){return-Math.exp(-n)}function Pn(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Un(n){return n===10?Pn:n===Math.E?Math.exp:e=>Math.pow(n,e)}function Xn(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function Y(n){return(e,o)=>-n(-e,o)}function Jn(n){const e=n(Q,W),o=e.domain;let t=10,r,u;function a(){return r=Xn(t),u=Un(t),o()[0]<0?(r=Y(r),u=Y(u),n(Vn,Hn)):n(Q,W),e}return e.base=function(i){return arguments.length?(t=+i,a()):t},e.domain=function(i){return arguments.length?(o(i),a()):o()},e.ticks=i=>{const s=o();let c=s[0],m=s[s.length-1];const f=m<c;f&&([c,m]=[m,c]);let l=r(c),v=r(m),g,_;const N=i==null?10:+i;let y=[];if(!(t%1)&&v-l<N){if(l=Math.floor(l),v=Math.ceil(v),c>0){for(;l<=v;++l)for(g=1;g<t;++g)if(_=l<0?g/u(-l):g*u(l),!(_<c)){if(_>m)break;y.push(_)}}else for(;l<=v;++l)for(g=t-1;g>=1;--g)if(_=l>0?g/u(-l):g*u(l),!(_<c)){if(_>m)break;y.push(_)}y.length*2<N&&(y=J(c,m,N))}else y=J(l,v,Math.min(v-l,N)).map(u);return f?y.reverse():y},e.tickFormat=(i,s)=>{if(i==null&&(i=10),s==null&&(s=t===10?"s":","),typeof s!="function"&&(!(t%1)&&(s=ln(s)).precision==null&&(s.trim=!0),s=cn(s)),i===1/0)return s;const c=Math.max(1,t*i/e.ticks().length);return m=>{let f=m/u(Math.round(r(m)));return f*t<t-.5&&(f*=t),f<=c?s(m):""}},e.nice=()=>o(Tn(o(),{floor:i=>u(Math.floor(r(i))),ceil:i=>u(Math.ceil(r(i)))})),e}function tn(){const n=Jn(On()).domain([1,10]);return n.copy=()=>qn(n,tn()).base(n.base()),Ln.apply(n,arguments),n}const Kn=["color"],Qn={class:"absolute"},Wn=Z({__name:"ModBar",props:{name:null,items:null,offset:null},emits:["showitems","selectrecipes"],setup(n,{emit:e}){const o=n,{selectRecipes:t}=b(),r=z(()=>v(o.items)),u=z(()=>fn(o.name)),a=B(),i=B();let s=B(),c=B();const f=tn().domain([.1,1e3]).range([0,1e3]).base(2),l=h=>Math.max(0,f(h));function v(h){const p=h.map(w=>w.complexity),d=l(Math.min(...p)),M=l(Math.max(...p))-d,k=h.map(w=>({item:w,pos:l(w.complexity)-d,width:Math.max(3,l(w.usability)/50),hue:1/(1+Math.log(w.popularity+1))}));return{from:d-l(o.offset),width:Math.max(100,M),items:k}}mn(()=>{hn(()=>{var p;const h=(p=i.value)==null?void 0:p.getContext("2d");h&&(a.value=h),g(),window.addEventListener("resize",g)})}),pn(()=>window.removeEventListener("resize",g)),dn(()=>g());function g(){var d,M;const h=i.value;if(!h)return;const p=(M=(d=h==null?void 0:h.parentNode)==null?void 0:d.parentNode)==null?void 0:M.getBoundingClientRect();h.width=p.width-2,h.height=p.height-2,_()}function _(){var p,d;const h=(d=(p=i.value)==null?void 0:p.height)!=null?d:1;r.value.items.forEach(async M=>{if(!a.value)return;const k=M.pos-M.width|0,A=M.pos+M.width|0,w=a.value.createLinearGradient(k,0,A,0);N(w,M),a.value.globalCompositeOperation="screen",a.value.fillStyle=w,a.value.fillRect(k,0,A-k,h)})}function N(h,p){let d=0;const M=.1,k=1,A=1,w=.25,I=`hsla(${44*p.hue%255}, ${100*A|0}%, ${100*w|0}%,`;for(h.addColorStop(.5,`${I} ${1*k})`);d<.5;){const D=Math.pow(d*2,.3)/2;h.addColorStop(D,`${I} ${d*2*k})`),h.addColorStop(1-D,`${I} ${d*2*k})`),d+=M}}function y(h){return r.value?nn(r.value.items).map(p=>[Math.abs(h-p.pos),p]).sortBy(0).filter(([p,d])=>p<d.width).map(([,p])=>p.item).slice(0,10).value():[]}gn(s,()=>e("showitems",s.value));function rn(h){s.value=y(h.offsetX),c.value=s.value.map(p=>p.mainRecipe).filter(p=>Boolean(p))}function on(h){c.value.length&&t(c.value)}return(h,p)=>{var d;return $(),E("div",{style:O({"margin-left":`${x(r).from}px`,width:`${x(r).width}px`,cursor:`${(d=c.value)!=null&&d.length?"pointer":"default"}`}),color:`hsla(${x(u)}, 60%, 40%, 0.1)`,class:"bar border-1 border-round-sm border-primary-900",onMousemove:rn,onClick:on},[R("div",Qn,[R("canvas",{ref_key:"canvas",ref:i},null,512)]),R("span",{style:O({color:`hsl(${x(u)}, 60%, 40%)`}),class:"mx-2"},vn(n.name),5)],44,Kn)}}});const Yn=Mn(Wn,[["__scopeId","data-v-84c09e6e"]]),Zn={class:"m-0 relative"},bn={class:"absolute"},ne={class:"fixed"},oe=Z({__name:"history",setup(n){const e=b().pickedItems,o=z(()=>e?a(e):void 0),t=wn(0),r=B(),u=["placeholder"];function a(i){let s=Number.MAX_SAFE_INTEGER;const c=nn(i).groupBy("source").entries().filter(([m])=>!u.includes(m)).sortBy(([,m])=>{const f=Math.min(...m.map(l=>l.complexity));return s=Math.min(s,f),f}).value();return t.value=s,c}return(i,s)=>{const c=Yn,m=un;return $(),E("div",Zn,[R("div",bn,[($(!0),E(T,null,V(x(o),([f,l],v)=>($(),H(c,{key:v,name:f,items:l,offset:t.value,onShowitems:g=>r.value=g},null,8,["name","items","offset","onShowitems"]))),128))]),R("div",ne,[($(!0),E(T,null,V(x(r),f=>($(),H(m,{key:f.id,item:f},null,8,["item"]))),128))])])}}});export{oe as default};

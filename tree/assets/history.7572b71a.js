import{c as Nn,b as U,e as K,f as Q,g as An,_ as Sn}from"./transform.bed17a9c.js";import{_ as yn}from"./lodash.8ea9d501.js";import{g as $n}from"./Item.409687a9.js";import{i as En,d as Mn,u as wn,k as V,a as L,o as Bn,B as zn,C as Cn,D as Rn,w as bn,h as C,c as T,g as j,t as Ln,m as W,l as R,y as jn,F as nn,r as tn,e as en}from"./index.a689f99f.js";function G(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function In(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function vn(n){let t,r,e;n.length!==2?(t=G,r=(i,s)=>G(n(i),s),e=(i,s)=>n(i)-s):(t=n===G||n===In?n:Fn,r=n,e=n);function o(i,s,l=0,h=i.length){if(l<h){if(t(s,s)!==0)return h;do{const c=l+h>>>1;r(i[c],s)<0?l=c+1:h=c}while(l<h)}return l}function a(i,s,l=0,h=i.length){if(l<h){if(t(s,s)!==0)return h;do{const c=l+h>>>1;r(i[c],s)<=0?l=c+1:h=c}while(l<h)}return l}function u(i,s,l=0,h=i.length){const c=o(i,s,l,h-1);return c>l&&e(i[c-1],s)>-e(i[c],s)?c-1:c}return{left:o,center:u,right:a}}function Fn(){return 0}function Pn(n){return n===null?NaN:+n}const Dn=vn(G),Tn=Dn.right;vn(Pn).center;var Gn=Tn,rn=Math.sqrt(50),on=Math.sqrt(10),an=Math.sqrt(2);function un(n,t,r){var e,o=-1,a,u,i;if(t=+t,n=+n,r=+r,n===t&&r>0)return[n];if((e=t<n)&&(a=n,n=t,t=a),(i=Xn(n,t,r))===0||!isFinite(i))return[];if(i>0){let s=Math.round(n/i),l=Math.round(t/i);for(s*i<n&&++s,l*i>t&&--l,u=new Array(a=l-s+1);++o<a;)u[o]=(s+o)*i}else{i=-i;let s=Math.round(n*i),l=Math.round(t*i);for(s/i<n&&++s,l/i>t&&--l,u=new Array(a=l-s+1);++o<a;)u[o]=(s+o)/i}return e&&u.reverse(),u}function Xn(n,t,r){var e=(t-n)/Math.max(0,r),o=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,o);return o>=0?(a>=rn?10:a>=on?5:a>=an?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=rn?10:a>=on?5:a>=an?2:1)}function qn(n,t){t||(t=[]);var r=n?Math.min(t.length,n.length):0,e=t.slice(),o;return function(a){for(o=0;o<r;++o)e[o]=n[o]*(1-a)+t[o]*a;return e}}function On(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Un(n,t){var r=t?t.length:0,e=n?Math.min(r,n.length):0,o=new Array(e),a=new Array(r),u;for(u=0;u<e;++u)o[u]=Y(n[u],t[u]);for(;u<r;++u)a[u]=t[u];return function(i){for(u=0;u<e;++u)a[u]=o[u](i);return a}}function Vn(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function Hn(n,t){var r={},e={},o;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in n?r[o]=Y(n[o],t[o]):e[o]=t[o];return function(a){for(o in r)e[o]=r[o](a);return e}}function Y(n,t){var r=typeof t,e;return t==null||r==="boolean"?Nn(t):(r==="number"?U:r==="string"?(e=K(t))?(t=e,Q):An:t instanceof K?Q:t instanceof Date?Vn:On(t)?qn:Array.isArray(t)?Un:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Hn:U)(n,t)}function Yn(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function Zn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function X(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,e=n.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+n.slice(r+1)]}function Jn(n){return n=X(Math.abs(n)),n?n[1]:NaN}function Kn(n,t){return function(r,e){for(var o=r.length,a=[],u=0,i=n[0],s=0;o>0&&i>0&&(s+i+1>e&&(i=Math.max(1,e-s)),a.push(r.substring(o-=i,o+i)),!((s+=i+1)>e));)i=n[u=(u+1)%n.length];return a.reverse().join(t)}}function Qn(n){return function(t){return t.replace(/[0-9]/g,function(r){return n[+r]})}}var Wn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function q(n){if(!(t=Wn.exec(n)))throw new Error("invalid format: "+n);var t;return new Z({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}q.prototype=Z.prototype;function Z(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Z.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nt(n){n:for(var t=n.length,r=1,e=-1,o;r<t;++r)switch(n[r]){case".":e=o=r;break;case"0":e===0&&(e=r),o=r;break;default:if(!+n[r])break n;e>0&&(e=0);break}return e>0?n.slice(0,e)+n.slice(o+1):n}var _n;function tt(n,t){var r=X(n,t);if(!r)return n+"";var e=r[0],o=r[1],a=o-(_n=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,u=e.length;return a===u?e:a>u?e+new Array(a-u+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+X(n,Math.max(0,t+a-1))[0]}function sn(n,t){var r=X(n,t);if(!r)return n+"";var e=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}var cn={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Zn,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>sn(n*100,t),r:sn,s:tt,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function fn(n){return n}var ln=Array.prototype.map,hn=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function et(n){var t=n.grouping===void 0||n.thousands===void 0?fn:Kn(ln.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",e=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?fn:Qn(ln.call(n.numerals,String)),u=n.percent===void 0?"%":n.percent+"",i=n.minus===void 0?"\u2212":n.minus+"",s=n.nan===void 0?"NaN":n.nan+"";function l(c){c=q(c);var f=c.fill,M=c.align,p=c.sign,w=c.symbol,x=c.zero,v=c.width,b=c.comma,$=c.precision,g=c.trim,m=c.type;m==="n"?(b=!0,m="g"):cn[m]||($===void 0&&($=12),g=!0,m="g"),(x||f==="0"&&M==="=")&&(x=!0,f="0",M="=");var y=w==="$"?r:w==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",_=w==="$"?e:/[%p]/.test(m)?u:"",N=cn[m],B=/[defgprs%]/.test(m);$=$===void 0?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function k(d){var S=y,A=_,z,J,I;if(m==="c")A=N(d)+A,d="";else{d=+d;var F=d<0||1/d<0;if(d=isNaN(d)?s:N(Math.abs(d),$),g&&(d=nt(d)),F&&+d==0&&p!=="+"&&(F=!1),S=(F?p==="("?p:i:p==="-"||p==="("?"":p)+S,A=(m==="s"?hn[8+_n/3]:"")+A+(F&&p==="("?")":""),B){for(z=-1,J=d.length;++z<J;)if(I=d.charCodeAt(z),48>I||I>57){A=(I===46?o+d.slice(z+1):d.slice(z))+A,d=d.slice(0,z);break}}}b&&!x&&(d=t(d,1/0));var P=S.length+d.length+A.length,E=P<v?new Array(v-P+1).join(f):"";switch(b&&x&&(d=t(E+d,E.length?v-A.length:1/0),E=""),M){case"<":d=S+d+A+E;break;case"=":d=S+E+d+A;break;case"^":d=E.slice(0,P=E.length>>1)+S+d+A+E.slice(P);break;default:d=E+S+d+A;break}return a(d)}return k.toString=function(){return c+""},k}function h(c,f){var M=l((c=q(c),c.type="f",c)),p=Math.max(-8,Math.min(8,Math.floor(Jn(f)/3)))*3,w=Math.pow(10,-p),x=hn[8+p/3];return function(v){return M(w*v)+x}}return{format:l,formatPrefix:h}}var O,kn;rt({thousands:",",grouping:[3],currency:["$",""]});function rt(n){return O=et(n),kn=O.format,O}function ot(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function it(n){return function(){return n}}function at(n){return+n}var mn=[0,1];function D(n){return n}function H(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:it(isNaN(t)?NaN:.5)}function ut(n,t){var r;return n>t&&(r=n,n=t,t=r),function(e){return Math.max(n,Math.min(t,e))}}function st(n,t,r){var e=n[0],o=n[1],a=t[0],u=t[1];return o<e?(e=H(o,e),a=r(u,a)):(e=H(e,o),a=r(a,u)),function(i){return a(e(i))}}function ct(n,t,r){var e=Math.min(n.length,t.length)-1,o=new Array(e),a=new Array(e),u=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<e;)o[u]=H(n[u],n[u+1]),a[u]=r(t[u],t[u+1]);return function(i){var s=Gn(n,i,1,e)-1;return a[s](o[s](i))}}function ft(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function lt(){var n=mn,t=mn,r=Y,e,o,a,u=D,i,s,l;function h(){var f=Math.min(n.length,t.length);return u!==D&&(u=ut(n[0],n[f-1])),i=f>2?ct:st,s=l=null,c}function c(f){return f==null||isNaN(f=+f)?a:(s||(s=i(n.map(e),t,r)))(e(u(f)))}return c.invert=function(f){return u(o((l||(l=i(t,n.map(e),U)))(f)))},c.domain=function(f){return arguments.length?(n=Array.from(f,at),h()):n.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),r=Yn,h()},c.clamp=function(f){return arguments.length?(u=f?!0:D,h()):u!==D},c.interpolate=function(f){return arguments.length?(r=f,h()):r},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,M){return e=f,o=M,h()}}function ht(n,t){n=n.slice();var r=0,e=n.length-1,o=n[r],a=n[e],u;return a<o&&(u=r,r=e,e=u,u=o,o=a,a=u),n[r]=t.floor(o),n[e]=t.ceil(a),n}function dn(n){return Math.log(n)}function gn(n){return Math.exp(n)}function mt(n){return-Math.log(-n)}function dt(n){return-Math.exp(-n)}function gt(n){return isFinite(n)?+("1e"+n):n<0?0:n}function pt(n){return n===10?gt:n===Math.E?Math.exp:t=>Math.pow(n,t)}function yt(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function pn(n){return(t,r)=>-n(-t,r)}function Mt(n){const t=n(dn,gn),r=t.domain;let e=10,o,a;function u(){return o=yt(e),a=pt(e),r()[0]<0?(o=pn(o),a=pn(a),n(mt,dt)):n(dn,gn),t}return t.base=function(i){return arguments.length?(e=+i,u()):e},t.domain=function(i){return arguments.length?(r(i),u()):r()},t.ticks=i=>{const s=r();let l=s[0],h=s[s.length-1];const c=h<l;c&&([l,h]=[h,l]);let f=o(l),M=o(h),p,w;const x=i==null?10:+i;let v=[];if(!(e%1)&&M-f<x){if(f=Math.floor(f),M=Math.ceil(M),l>0){for(;f<=M;++f)for(p=1;p<e;++p)if(w=f<0?p/a(-f):p*a(f),!(w<l)){if(w>h)break;v.push(w)}}else for(;f<=M;++f)for(p=e-1;p>=1;--p)if(w=f>0?p/a(-f):p*a(f),!(w<l)){if(w>h)break;v.push(w)}v.length*2<x&&(v=un(l,h,x))}else v=un(f,M,Math.min(M-f,x)).map(a);return c?v.reverse():v},t.tickFormat=(i,s)=>{if(i==null&&(i=10),s==null&&(s=e===10?"s":","),typeof s!="function"&&(!(e%1)&&(s=q(s)).precision==null&&(s.trim=!0),s=kn(s)),i===1/0)return s;const l=Math.max(1,e*i/t.ticks().length);return h=>{let c=h/a(Math.round(o(h)));return c*e<e-.5&&(c*=e),c<=l?s(h):""}},t.nice=()=>r(ht(r(),{floor:i=>a(Math.floor(o(i))),ceil:i=>a(Math.ceil(o(i)))})),t}function xn(){const n=Mt(lt()).domain([1,10]);return n.copy=()=>ft(n,xn()).base(n.base()),ot.apply(n,arguments),n}const wt=["color"],vt={class:"absolute"},_t=Mn({props:{name:null,items:null,offset:null},emits:["showitems","selectrecipes"],setup(n,{emit:t}){const r=n,{selectRecipes:e}=wn(),o=V(()=>M(r.items)),a=V(()=>$n(r.name)),u=L(),i=L();let s=L(),l=L();const c=xn().domain([.1,1e3]).range([0,1e3]).base(2),f=g=>Math.max(0,c(g));function M(g){const m=g.map(k=>k.complexity),y=f(Math.min(...m)),_=f(Math.max(...m))-y,N=g.map(k=>({item:k,pos:f(k.complexity)-y,width:Math.max(3,f(k.usability)/50),hue:1/(1+Math.log(k.popularity+1))}));return{from:y-f(r.offset),width:Math.max(100,_),items:N}}Bn(()=>{zn(()=>{var m;const g=(m=i.value)==null?void 0:m.getContext("2d");g&&(u.value=g),p(),window.addEventListener("resize",p)})}),Cn(()=>window.removeEventListener("resize",p)),Rn(()=>p());function p(){var y,_;const g=i.value;if(!g)return;const m=(_=(y=g==null?void 0:g.parentNode)==null?void 0:y.parentNode)==null?void 0:_.getBoundingClientRect();g.width=m.width-2,g.height=m.height-2,w()}function w(){var m,y;const g=(y=(m=i.value)==null?void 0:m.height)!=null?y:1;o.value.items.forEach(async _=>{if(!u.value)return;const N=_.pos-_.width|0,B=_.pos+_.width|0,k=u.value.createLinearGradient(N,0,B,0);x(k,_),u.value.globalCompositeOperation="screen",u.value.fillStyle=k,u.value.fillRect(N,0,B-N,g)})}function x(g,m){let y=0;const _=.1,N=1,B=1,k=.25,d=`hsla(${44*m.hue%255}, ${100*B|0}%, ${100*k|0}%,`;for(g.addColorStop(.5,`${d} ${1*N})`);y<.5;){const S=Math.pow(y*2,.3)/2;g.addColorStop(S,`${d} ${y*2*N})`),g.addColorStop(1-S,`${d} ${y*2*N})`),y+=_}}function v(g){return o.value?yn(o.value.items).map(m=>[Math.abs(g-m.pos),m]).sortBy(0).filter(([m,y])=>m<y.width).map(([,m])=>m.item).slice(0,10).value():[]}bn(s,()=>t("showitems",s.value));function b(g){s.value=v(g.offsetX),l.value=s.value.map(m=>m.mainRecipe).filter(m=>Boolean(m))}function $(g){l.value.length&&e(l.value)}return(g,m)=>{var y;return C(),T("div",{style:W({"margin-left":`${R(o).from}px`,width:`${R(o).width}px`,cursor:`${(y=l.value)!=null&&y.length?"pointer":"default"}`}),color:`hsla(${R(a)}, 60%, 40%, 0.1)`,class:"bar border-1 border-round-sm border-primary-900",onMousemove:b,onClick:$},[j("div",vt,[j("canvas",{ref_key:"canvas",ref:i},null,512)]),j("span",{style:W({color:`hsl(${R(a)}, 60%, 40%)`}),class:"mx-2"},Ln(n.name),5)],44,wt)}}});var kt=En(_t,[["__scopeId","data-v-9927d9f0"]]);const xt={class:"m-0 relative"},Nt={class:"absolute"},At={class:"fixed"},zt=Mn({setup(n){const{pickedItems:t}=wn(),r=V(()=>t?a(t):void 0),e=jn(0),o=L();function a(u){let i=Number.MAX_SAFE_INTEGER;const s=yn(u).groupBy("source").entries().sortBy(([,l])=>{const h=Math.min(...l.map(c=>c.complexity));return i=Math.min(i,h),h}).value();return e.value=i,s}return(u,i)=>{const s=kt,l=Sn;return C(),T("div",xt,[j("div",Nt,[(C(!0),T(nn,null,tn(R(r),([h,c],f)=>(C(),en(s,{key:f,name:h,items:c,offset:e.value,onShowitems:M=>o.value=M},null,8,["name","items","offset","onShowitems"]))),128))]),j("div",At,[(C(!0),T(nn,null,tn(R(o),h=>(C(),en(l,{key:h.id,item:h},null,8,["item"]))),128))])])}}});export{zt as default};

import{_ as an}from"./ItemDetailed.b4a658b2.js";import{a0 as un,a1 as L,a2 as G,a3 as q,a4 as sn,a5 as ln,a6 as cn,H as Z,K as b,M as z,a7 as fn,N as B,X as mn,a8 as hn,a9 as pn,aa as dn,ab as gn,o as $,a as C,f as R,t as vn,b as T,J as A,ac as nn,$ as Mn,I as wn,F as V,r as X,c as H}from"./index.5a4444b2.js";import"./GearedNumber.573e49ad.js";function _n(n,t){t||(t=[]);var o=n?Math.min(t.length,n.length):0,e=t.slice(),r;return function(a){for(r=0;r<o;++r)e[r]=n[r]*(1-a)+t[r]*a;return e}}function yn(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function kn(n,t){var o=t?t.length:0,e=n?Math.min(o,n.length):0,r=new Array(e),a=new Array(o),u;for(u=0;u<e;++u)r[u]=j(n[u],t[u]);for(;u<o;++u)a[u]=t[u];return function(i){for(u=0;u<e;++u)a[u]=r[u](i);return a}}function Nn(n,t){var o=new Date;return n=+n,t=+t,function(e){return o.setTime(n*(1-e)+t*e),o}}function $n(n,t){var o={},e={},r;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in n?o[r]=j(n[r],t[r]):e[r]=t[r];return function(a){for(r in o)e[r]=o[r](a);return e}}function j(n,t){var o=typeof t,e;return t==null||o==="boolean"?un(t):(o==="number"?L:o==="string"?(e=G(t))?(t=e,q):sn:t instanceof G?q:t instanceof Date?Nn:yn(t)?_n:Array.isArray(t)?kn:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$n:L)(n,t)}function An(n,t){return n=+n,t=+t,function(o){return Math.round(n*(1-o)+t*o)}}function E(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function xn(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function tn(n){let t,o,e;n.length!==2?(t=E,o=(i,s)=>E(n(i),s),e=(i,s)=>n(i)-s):(t=n===E||n===xn?n:Bn,o=n,e=n);function r(i,s,c=0,m=i.length){if(c<m){if(t(s,s)!==0)return m;do{const f=c+m>>>1;o(i[f],s)<0?c=f+1:m=f}while(c<m)}return c}function a(i,s,c=0,m=i.length){if(c<m){if(t(s,s)!==0)return m;do{const f=c+m>>>1;o(i[f],s)<=0?c=f+1:m=f}while(c<m)}return c}function u(i,s,c=0,m=i.length){const f=r(i,s,c,m-1);return f>c&&e(i[f-1],s)>-e(i[f],s)?f-1:f}return{left:r,center:u,right:a}}function Bn(){return 0}function Rn(n){return n===null?NaN:+n}const Sn=tn(E),Cn=Sn.right;tn(Rn).center;const En=Cn;var O=Math.sqrt(50),U=Math.sqrt(10),J=Math.sqrt(2);function K(n,t,o){var e,r=-1,a,u,i;if(t=+t,n=+n,o=+o,n===t&&o>0)return[n];if((e=t<n)&&(a=n,n=t,t=a),(i=In(n,t,o))===0||!isFinite(i))return[];if(i>0){let s=Math.round(n/i),c=Math.round(t/i);for(s*i<n&&++s,c*i>t&&--c,u=new Array(a=c-s+1);++r<a;)u[r]=(s+r)*i}else{i=-i;let s=Math.round(n*i),c=Math.round(t*i);for(s/i<n&&++s,c/i>t&&--c,u=new Array(a=c-s+1);++r<a;)u[r]=(s+r)/i}return e&&u.reverse(),u}function In(n,t,o){var e=(t-n)/Math.max(0,o),r=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,r);return r>=0?(a>=O?10:a>=U?5:a>=J?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=O?10:a>=U?5:a>=J?2:1)}function Ln(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function zn(n){return function(){return n}}function Fn(n){return+n}var P=[0,1];function S(n){return n}function F(n,t){return(t-=n=+n)?function(o){return(o-n)/t}:zn(isNaN(t)?NaN:.5)}function jn(n,t){var o;return n>t&&(o=n,n=t,t=o),function(e){return Math.max(n,Math.min(t,e))}}function Dn(n,t,o){var e=n[0],r=n[1],a=t[0],u=t[1];return r<e?(e=F(r,e),a=o(u,a)):(e=F(e,r),a=o(a,u)),function(i){return a(e(i))}}function Gn(n,t,o){var e=Math.min(n.length,t.length)-1,r=new Array(e),a=new Array(e),u=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<e;)r[u]=F(n[u],n[u+1]),a[u]=o(t[u],t[u+1]);return function(i){var s=En(n,i,1,e)-1;return a[s](r[s](i))}}function qn(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Tn(){var n=P,t=P,o=j,e,r,a,u=S,i,s,c;function m(){var l=Math.min(n.length,t.length);return u!==S&&(u=jn(n[0],n[l-1])),i=l>2?Gn:Dn,s=c=null,f}function f(l){return l==null||isNaN(l=+l)?a:(s||(s=i(n.map(e),t,o)))(e(u(l)))}return f.invert=function(l){return u(r((c||(c=i(t,n.map(e),L)))(l)))},f.domain=function(l){return arguments.length?(n=Array.from(l,Fn),m()):n.slice()},f.range=function(l){return arguments.length?(t=Array.from(l),m()):t.slice()},f.rangeRound=function(l){return t=Array.from(l),o=An,m()},f.clamp=function(l){return arguments.length?(u=l?!0:S,m()):u!==S},f.interpolate=function(l){return arguments.length?(o=l,m()):o},f.unknown=function(l){return arguments.length?(a=l,f):a},function(l,v){return e=l,r=v,m()}}function Vn(n,t){n=n.slice();var o=0,e=n.length-1,r=n[o],a=n[e],u;return a<r&&(u=o,o=e,e=u,u=r,r=a,a=u),n[o]=t.floor(r),n[e]=t.ceil(a),n}function Q(n){return Math.log(n)}function W(n){return Math.exp(n)}function Xn(n){return-Math.log(-n)}function Hn(n){return-Math.exp(-n)}function On(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Un(n){return n===10?On:n===Math.E?Math.exp:t=>Math.pow(n,t)}function Jn(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function Y(n){return(t,o)=>-n(-t,o)}function Kn(n){const t=n(Q,W),o=t.domain;let e=10,r,a;function u(){return r=Jn(e),a=Un(e),o()[0]<0?(r=Y(r),a=Y(a),n(Xn,Hn)):n(Q,W),t}return t.base=function(i){return arguments.length?(e=+i,u()):e},t.domain=function(i){return arguments.length?(o(i),u()):o()},t.ticks=i=>{const s=o();let c=s[0],m=s[s.length-1];const f=m<c;f&&([c,m]=[m,c]);let l=r(c),v=r(m),g,_;const N=i==null?10:+i;let y=[];if(!(e%1)&&v-l<N){if(l=Math.floor(l),v=Math.ceil(v),c>0){for(;l<=v;++l)for(g=1;g<e;++g)if(_=l<0?g/a(-l):g*a(l),!(_<c)){if(_>m)break;y.push(_)}}else for(;l<=v;++l)for(g=e-1;g>=1;--g)if(_=l>0?g/a(-l):g*a(l),!(_<c)){if(_>m)break;y.push(_)}y.length*2<N&&(y=K(c,m,N))}else y=K(l,v,Math.min(v-l,N)).map(a);return f?y.reverse():y},t.tickFormat=(i,s)=>{if(i==null&&(i=10),s==null&&(s=e===10?"s":","),typeof s!="function"&&(!(e%1)&&(s=ln(s)).precision==null&&(s.trim=!0),s=cn(s)),i===1/0)return s;const c=Math.max(1,e*i/t.ticks().length);return m=>{let f=m/a(Math.round(r(m)));return f*e<e-.5&&(f*=e),f<=c?s(m):""}},t.nice=()=>o(Vn(o(),{floor:i=>a(Math.floor(r(i))),ceil:i=>a(Math.ceil(r(i)))})),t}function en(){const n=Kn(Tn()).domain([1,10]);return n.copy=()=>qn(n,en()).base(n.base()),Ln.apply(n,arguments),n}const Pn=["color"],Qn={class:"absolute"},Wn=Z({__name:"ModBar",props:{name:null,items:null,offset:null},emits:["showitems","selectrecipes"],setup(n,{emit:t}){const o=n,{selectRecipes:e}=b(),r=z(()=>v(o.items)),a=z(()=>fn(o.name)),u=B(),i=B();let s=B(),c=B();const f=en().domain([.1,1e3]).range([0,1e3]).base(2),l=h=>Math.max(0,f(h));function v(h){const p=h.map(w=>w.complexity),d=l(Math.min(...p)),M=l(Math.max(...p))-d,k=h.map(w=>({item:w,pos:l(w.complexity)-d,width:Math.max(3,l(w.usability)/50),hue:1/(1+Math.log(w.popularity+1))}));return{from:d-l(o.offset+1),width:Math.max(100,M),items:k}}mn(()=>{hn(()=>{var p;const h=(p=i.value)==null?void 0:p.getContext("2d");h&&(u.value=h),g(),window.addEventListener("resize",g)})}),pn(()=>window.removeEventListener("resize",g)),dn(()=>g());function g(){var d,M;const h=i.value;if(!h)return;const p=(M=(d=h==null?void 0:h.parentNode)==null?void 0:d.parentNode)==null?void 0:M.getBoundingClientRect();h.width=p.width-2,h.height=p.height-2,_()}function _(){var p,d;const h=(d=(p=i.value)==null?void 0:p.height)!=null?d:1;r.value.items.forEach(async M=>{if(!u.value)return;const k=M.pos-M.width|0,x=M.pos+M.width|0,w=u.value.createLinearGradient(k,0,x,0);N(w,M),u.value.globalCompositeOperation="screen",u.value.fillStyle=w,u.value.fillRect(k,0,x-k,h)})}function N(h,p){let d=0;const M=.1,k=1,x=1,w=.25,I=`hsla(${44*p.hue%255}, ${100*x|0}%, ${100*w|0}%,`;for(h.addColorStop(.5,`${I} ${1*k})`);d<.5;){const D=(d*2)**.3/2;h.addColorStop(D,`${I} ${d*2*k})`),h.addColorStop(1-D,`${I} ${d*2*k})`),d+=M}}function y(h){return r.value?nn(r.value.items).map(p=>[Math.abs(h-p.pos),p]).sortBy(0).filter(([p,d])=>p<d.width).map(([,p])=>p.item).slice(0,10).value():[]}gn(s,()=>t("showitems",s.value));function rn(h){s.value=y(h.offsetX),c.value=s.value.map(p=>p.mainRecipe).filter(p=>Boolean(p))}function on(h){c.value.length&&e(c.value)}return(h,p)=>{var d;return $(),C("div",{style:T({"margin-left":`${A(r).from}px`,width:`${A(r).width}px`,cursor:`${(d=c.value)!=null&&d.length?"pointer":"default"}`}),color:`hsla(${A(a)}, 60%, 40%, 0.1)`,class:"bar border-1 border-round-sm border-primary-900",onMousemove:rn,onClick:on},[R("div",Qn,[R("canvas",{ref_key:"canvas",ref:i},null,512)]),R("span",{style:T({color:`hsl(${A(a)}, 60%, 40%)`}),class:"mx-2"},vn(n.name),5)],44,Pn)}}});const Yn=Mn(Wn,[["__scopeId","data-v-bf0d0b31"]]),Zn={class:"m-0 relative"},bn={class:"absolute"},nt={class:"fixed"},ot=Z({__name:"history",setup(n){const t=b().pickedItems,o=z(()=>t?u(t):void 0),e=wn(0),r=B(),a=["placeholder"];function u(i){let s=Number.MAX_SAFE_INTEGER;const c=nn(i).groupBy("source").entries().filter(([m])=>!a.includes(m)).sortBy(([,m])=>{const f=Math.min(...m.map(l=>l.complexity));return s=Math.min(s,f),f}).value();return e.value=s,c}return(i,s)=>{const c=Yn,m=an;return $(),C("div",Zn,[R("div",bn,[($(!0),C(V,null,X(A(o),([f,l],v)=>($(),H(c,{key:v,name:f,items:l,offset:e.value,onShowitems:g=>r.value=g},null,8,["name","items","offset","onShowitems"]))),128))]),R("div",nt,[($(!0),C(V,null,X(A(r),f=>($(),H(m,{key:f.id,item:f},null,8,["item"]))),128))])])}}});export{ot as default};
